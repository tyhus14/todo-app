$(document).ready(function(){function a(){var a=todoArray.length,b=_.where(todoArray,{done:!0}).length,c=_.where(todoArray,{done:!1}).length;$(".total-js").empty().html(a),$(".completed-js").empty().html(b),$(".active-js").empty().html(c)}var b=_.template($(".new-todo").text());todoArray=[],$(".add-btn").click(function(){var c=$(".main-input").val(),d={description:c||"no item",done:!1,id:_.uniqueId("todo")},e=b(d);$(".js-todo-items").prepend(e),todoArray.push(d),$(".main-input").val(""),a()}),$(".todo-form").submit(function(){var c=$(".main-input").val(),d={description:c||"no item",done:!1,id:_.uniqueId("todo")},e=b(d);$(".js-todo-items").prepend(e),todoArray.push(d),$(".main-input").val(""),a()}),$(".js-todo-items").on("click",".js-remove-todo",function(){var b=$(this).parent().attr("id");todoArray=_.reject(todoArray,function(a){return a.id==b}),$(this).parent().remove(),a()}),$(".js-todo-items").on("click",".js-complete-todo",function(){$(this).parent(".new-item").find(".new-box").addClass("active");var b=$(this).parent().attr("id"),c=_.findWhere(todoArray,{id:b});c.done=!0,$(this).siblings(".edit-input").hide(),a()}),$(".js-todo-items").on("click",".new-box",function(){$(this).parent(".new-item").find(".new-box").removeClass("active");var b=$(this).parent().attr("id"),c=_.findWhere(todoArray,{id:b});c.done=!1,a()}),$(".js-todo-items").on("click",".pencil-btn",function(){$(this).siblings(".edit-input").show(),$(this).siblings(".edit-input").focus()}),$(".js-todo-items").on("blur",".edit-input",function(){var a=$(this).parent().attr("id"),b=$(this).val(),c=_.findWhere(todoArray,{id:a});c.description=b,$(this).siblings(".description").empty().html(b),$(this).hide()}),a()});